{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { api, config } from \"./apiConfig\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nvar storeUserData = function _callee(userCredentials) {\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('@usr', JSON.stringify(userCredentials)));\n\n        case 3:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 6:\n          _context.prev = 6;\n          _context.t0 = _context[\"catch\"](0);\n\n        case 8:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 6]], Promise);\n};\n\nvar loginRequest = function _callee2(_ref) {\n  var username, password;\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          username = _ref.username, password = _ref.password;\n          console.log(config.baseUrl);\n          _context2.next = 4;\n          return _regeneratorRuntime.awrap(api.request({\n            method: 'POST',\n            url: config.baseUrl + \"/oauth/token\",\n            headers: {\n              'content-type': 'application/x-www-form-urlencoded',\n              'Authorization': \"Basic ZHNjYXRhbG9nOmRzY2F0YWxvZzEyMw==\"\n            },\n            params: {\n              grant_type: \"password\",\n              username: username,\n              password: password\n            }\n          }).then(function (res) {\n            if (res.status >= 200 && res.status < 300) {\n              return Promise.resolve(storeUserData(res.data));\n            } else {\n              return Promise.reject(res);\n            }\n          }).catch(function (err) {\n            return Promise.reject(err);\n          }));\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default loginRequest;","map":{"version":3,"names":["api","config","AsyncStorage","storeUserData","userCredentials","setItem","JSON","stringify","loginRequest","username","password","console","log","baseUrl","request","method","url","headers","params","grant_type","then","res","status","Promise","resolve","data","reject","catch","err"],"sources":["/home/bruno/dev/simple-projects/frontend/src/services/auth.js"],"sourcesContent":["import {api, config} from './apiConfig';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst storeUserData = async (userCredentials) => {\n    try {\n        return await AsyncStorage.setItem(\n        '@usr',\n        JSON.stringify(userCredentials)\n        );\n    } catch (error) {\n        \n    }\n};\n\nconst loginRequest = async ({username,password}) => {\n    console.log(config.baseUrl)\n    await api.request({\n        method:'POST',\n        url: `${config.baseUrl}/oauth/token`,\n            headers: {\n                'content-type': 'application/x-www-form-urlencoded',\n                'Authorization': \"Basic ZHNjYXRhbG9nOmRzY2F0YWxvZzEyMw==\"\n            },\n            params: {\n            grant_type: \"password\",\n            username,\n            password\n        }\n    }).then(res => {\n        if (res.status >= 200 && res.status < 300) {\n            \n            return Promise.resolve(storeUserData(res.data));\n        } else {\n            return Promise.reject(res);\n        }\n    }).catch((err) => {\n        return Promise.reject(err);\n    })\n}\n\nexport default loginRequest;"],"mappings":";AAAA,SAAQA,GAAR,EAAaC,MAAb;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;AAEA,IAAMC,aAAa,GAAG,iBAAOC,eAAP;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA;UAAA,iCAEDF,YAAY,CAACG,OAAb,CACb,MADa,EAEbC,IAAI,CAACC,SAAL,CAAeH,eAAf,CAFa,CAFC;;QAAA;UAAA;;QAAA;UAAA;UAAA;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAAtB;;AAWA,IAAMI,YAAY,GAAG;EAAA;EAAA;IAAA;MAAA;QAAA;UAAQC,QAAR,QAAQA,QAAR,EAAiBC,QAAjB,QAAiBA,QAAjB;UACjBC,OAAO,CAACC,GAAR,CAAYX,MAAM,CAACY,OAAnB;UADiB;UAAA,iCAEXb,GAAG,CAACc,OAAJ,CAAY;YACdC,MAAM,EAAC,MADO;YAEdC,GAAG,EAAKf,MAAM,CAACY,OAAZ,iBAFW;YAGVI,OAAO,EAAE;cACL,gBAAgB,mCADX;cAEL,iBAAiB;YAFZ,CAHC;YAOVC,MAAM,EAAE;cACRC,UAAU,EAAE,UADJ;cAERV,QAAQ,EAARA,QAFQ;cAGRC,QAAQ,EAARA;YAHQ;UAPE,CAAZ,EAYHU,IAZG,CAYE,UAAAC,GAAG,EAAI;YACX,IAAIA,GAAG,CAACC,MAAJ,IAAc,GAAd,IAAqBD,GAAG,CAACC,MAAJ,GAAa,GAAtC,EAA2C;cAEvC,OAAOC,OAAO,CAACC,OAAR,CAAgBrB,aAAa,CAACkB,GAAG,CAACI,IAAL,CAA7B,CAAP;YACH,CAHD,MAGO;cACH,OAAOF,OAAO,CAACG,MAAR,CAAeL,GAAf,CAAP;YACH;UACJ,CAnBK,EAmBHM,KAnBG,CAmBG,UAACC,GAAD,EAAS;YACd,OAAOL,OAAO,CAACG,MAAR,CAAeE,GAAf,CAAP;UACH,CArBK,CAFW;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAArB;;AA0BA,eAAepB,YAAf"},"metadata":{},"sourceType":"module"}