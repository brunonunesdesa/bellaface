{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nexport var getCartLocalStorage = function _callee() {\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.t0 = JSON;\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('@cart'));\n\n        case 4:\n          _context.t1 = _context.sent;\n          return _context.abrupt(\"return\", _context.t0.parse.call(_context.t0, _context.t1));\n\n        case 8:\n          _context.prev = 8;\n          _context.t2 = _context[\"catch\"](0);\n          console.log(_context.t2);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 8]], Promise);\n};\n\nvar setCartLocalStorage = function _callee2(item) {\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('@cart', JSON.stringify(item)));\n\n        case 3:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 6:\n          _context2.prev = 6;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.log(_context2.t0);\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 6]], Promise);\n};\n\nvar clearCart = function _callee3() {\n  return _regeneratorRuntime.async(function _callee3$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          try {\n            AsyncStorage.removeItem(\"@cart\");\n          } catch (err) {\n            console.log(err);\n          }\n\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport var addToCart = function _callee4(newProduct) {\n  var currentCart, newCart;\n  return _regeneratorRuntime.async(function _callee4$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return _regeneratorRuntime.awrap(getCartLocalStorage());\n\n        case 3:\n          currentCart = _context4.sent;\n\n          if (!(currentCart == null)) {\n            _context4.next = 6;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", setCartLocalStorage([_objectSpread({}, newProduct)]));\n\n        case 6:\n          newCart = [];\n          currentCart.forEach(function (e) {\n            newCart.push(e);\n          });\n          newCart.push(newProduct);\n          _context4.next = 11;\n          return _regeneratorRuntime.awrap(setCartLocalStorage(newCart));\n\n        case 11:\n          _context4.next = 16;\n          break;\n\n        case 13:\n          _context4.prev = 13;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.log(_context4.t0);\n\n        case 16:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, [[0, 13]], Promise);\n};","map":{"version":3,"names":["AsyncStorage","getCartLocalStorage","JSON","getItem","parse","console","log","setCartLocalStorage","item","setItem","stringify","clearCart","removeItem","err","addToCart","newProduct","currentCart","newCart","forEach","e","push"],"sources":["/home/bruno/dev/simple-projects/frontend/src/services/Cart/index.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport const getCartLocalStorage = async () => {\n    try {\n        return JSON.parse(await AsyncStorage.getItem('@cart'));\n    } catch (err) {\n        console.log(err)\n    }\n}\n\nconst setCartLocalStorage = async (item) => {\n    try {\n        return await AsyncStorage.setItem(\n        '@cart',\n        JSON.stringify(item)\n        );\n    } catch (err) {\n        console.log(err)\n    }\n};\n\nconst clearCart = async () => {\n    try {\n        AsyncStorage.removeItem(\"@cart\")\n    } catch (err) {\n        console.log(err)\n    }\n}\n\nexport const addToCart = async (newProduct) => {\n    try {\n        let currentCart = await getCartLocalStorage()\n        if (currentCart == null) return setCartLocalStorage([{...newProduct}])\n        let newCart = []\n        currentCart.forEach(e => {\n            newCart.push(e)\n        });\n        newCart.push(newProduct)\n        await setCartLocalStorage(newCart)\n    } catch (err) {\n        console.log(err)\n    }\n}\n"],"mappings":";;;;;;;AAAA,OAAOA,YAAP,MAAyB,2CAAzB;AAEA,OAAO,IAAMC,mBAAmB,GAAG;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA,cAEpBC,IAFoB;UAAA;UAAA,iCAEHF,YAAY,CAACG,OAAb,CAAqB,OAArB,CAFG;;QAAA;UAAA;UAAA,6CAEfC,KAFe;;QAAA;UAAA;UAAA;UAI3BC,OAAO,CAACC,GAAR;;QAJ2B;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAA5B;;AAQP,IAAMC,mBAAmB,GAAG,kBAAOC,IAAP;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA;UAAA,iCAEPR,YAAY,CAACS,OAAb,CACb,OADa,EAEbP,IAAI,CAACQ,SAAL,CAAeF,IAAf,CAFa,CAFO;;QAAA;UAAA;;QAAA;UAAA;UAAA;UAOpBH,OAAO,CAACC,GAAR;;QAPoB;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAA5B;;AAWA,IAAMK,SAAS,GAAG;EAAA;IAAA;MAAA;QAAA;UACd,IAAI;YACAX,YAAY,CAACY,UAAb,CAAwB,OAAxB;UACH,CAFD,CAEE,OAAOC,GAAP,EAAY;YACVR,OAAO,CAACC,GAAR,CAAYO,GAAZ;UACH;;QALa;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAAlB;;AAQA,OAAO,IAAMC,SAAS,GAAG,kBAAOC,UAAP;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA;UAAA;UAAA,iCAEOd,mBAAmB,EAF1B;;QAAA;UAEbe,WAFa;;UAAA,MAGbA,WAAW,IAAI,IAHF;YAAA;YAAA;UAAA;;UAAA,kCAGeT,mBAAmB,CAAC,mBAAKQ,UAAL,EAAD,CAHlC;;QAAA;UAIbE,OAJa,GAIH,EAJG;UAKjBD,WAAW,CAACE,OAAZ,CAAoB,UAAAC,CAAC,EAAI;YACrBF,OAAO,CAACG,IAAR,CAAaD,CAAb;UACH,CAFD;UAGAF,OAAO,CAACG,IAAR,CAAaL,UAAb;UARiB;UAAA,iCASXR,mBAAmB,CAACU,OAAD,CATR;;QAAA;UAAA;UAAA;;QAAA;UAAA;UAAA;UAWjBZ,OAAO,CAACC,GAAR;;QAXiB;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA,CAAlB"},"metadata":{},"sourceType":"module"}