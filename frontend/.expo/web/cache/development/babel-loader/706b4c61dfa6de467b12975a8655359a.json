{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Ionicons, AntDesign } from '@expo/vector-icons';\nimport Product from \"../../component/Product\";\nimport { getProducts } from \"../../services/Products\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Home(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loadingMore = _useState4[0],\n      setLoadingMore = _useState4[1];\n\n  useEffect(function () {\n    function fetchData() {\n      var response;\n      return _regeneratorRuntime.async(function fetchData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = _regeneratorRuntime;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(getProducts(4));\n\n            case 3:\n              _context.t1 = _context.sent;\n              _context.next = 6;\n              return _context.t0.awrap.call(_context.t0, _context.t1);\n\n            case 6:\n              response = _context.sent;\n              setProducts(response.data);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    fetchData();\n  }, []);\n\n  var _ListFooterComponent = function ListFooterComponent() {\n    return _jsx(View, {\n      children: _jsx(AntDesign, {\n        size: 24\n      })\n    });\n  };\n\n  var renderItem = function renderItem(_ref2) {\n    var item = _ref2.item;\n    return _jsx(Product, {\n      styles: styles.text,\n      data: item,\n      onClick: function onClick() {\n        return navigation.navigate(\"Detail\", item);\n      },\n      children: item.name\n    });\n  };\n\n  var stopFetchMore = true;\n\n  var handleOnEndReached = function _callee() {\n    var res;\n    return _regeneratorRuntime.async(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoadingMore(true);\n\n            if (!(!stopFetchMore && !products.last)) {\n              _context2.next = 5;\n              break;\n            }\n\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(getProducts(products.numberOfElements + 2).then(function (_ref3) {\n              var data = _ref3.data;\n              setProducts(data);\n              if (data.last) return setLoadingMore(false);\n              setProducts(_objectSpread(_objectSpread({}, products), data));\n              stopFetchMore = true;\n            }));\n\n          case 4:\n            res = _context2.sent;\n\n          case 5:\n            setLoadingMore(false);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.header,\n      children: [_jsx(Image, {\n        source: require(\"../../assets/banner.png\"),\n        style: styles.image\n      }), _jsxs(View, {\n        style: styles.textContainer,\n        children: [_jsx(Text, {\n          style: styles.text,\n          children: \"LOJA\"\n        }), _jsx(Text, {\n          style: styles.text,\n          children: \"\\u2022\"\n        }), _jsx(Text, {\n          style: styles.text,\n          children: \"BELLAFACE\"\n        }), _jsx(TouchableOpacity, {\n          style: {\n            position: \"absolute\",\n            right: 0,\n            alignSelf: 'center'\n          },\n          children: _jsx(Ionicons, {\n            name: \"filter\",\n            size: 24,\n            color: \"black\"\n          })\n        })]\n      })]\n    }), _jsx(View, {\n      style: styles.line\n    }), _jsxs(View, {\n      style: styles.flatList,\n      children: [_jsx(Text, {\n        style: styles.text,\n        children: \"LAN\\xC7AMENTOS\"\n      }), _jsx(FlatList, {\n        onScroll: function onScroll() {\n          return stopFetchMore = false;\n        },\n        data: products.content,\n        renderItem: renderItem,\n        horizontal: true,\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        },\n        onEndReached: handleOnEndReached,\n        onEndReachedThreshold: 0.5,\n        ListFooterComponent: function ListFooterComponent() {\n          return loadingMore && _jsx(_ListFooterComponent, {});\n        }\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: \"100%\",\n    backgroundColor: \"#fff\"\n  },\n  header: {\n    marginBottom: 8\n  },\n  image: {\n    width: \"100%\",\n    height: 200\n  },\n  textContainer: {\n    flexDirection: \"row\",\n    marginVertical: \"5%\",\n    marginHorizontal: \"5%\"\n  },\n  text: {\n    fontFamily: \"Anton_400Regular\",\n    fontSize: 26,\n    marginHorizontal: \"1%\"\n  },\n  flatList: {\n    flex: 1\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","Ionicons","AntDesign","Product","getProducts","Home","navigation","products","setProducts","loadingMore","setLoadingMore","fetchData","response","data","ListFooterComponent","renderItem","item","styles","text","navigate","name","stopFetchMore","handleOnEndReached","last","numberOfElements","then","res","container","header","require","image","textContainer","position","right","alignSelf","line","flatList","content","id","StyleSheet","create","flex","width","backgroundColor","marginBottom","height","flexDirection","marginVertical","marginHorizontal","fontFamily","fontSize"],"sources":["/home/bruno/dev/simple-projects/frontend/src/pages/Home/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Text, View, StyleSheet, ScrollView, Image, TouchableOpacity, FlatList } from \"react-native\";\nimport { Ionicons, AntDesign } from '@expo/vector-icons'; \nimport Product from '../../component/Product';\nimport {getProducts} from '../../services/Products'\n\nexport default function Home({navigation}) {\n\n    const [products, setProducts] = useState({});\n    const [loadingMore, setLoadingMore] = useState(false);\n\n    useEffect(()=>{\n        async function fetchData() {\n            // You can await here\n            const response = await await getProducts(4);\n            \n            setProducts(response.data)\n        }\n        fetchData();\n    },[])\n\n    const ListFooterComponent = () => {\n        return <View><AntDesign size={24} /></View>\n    }\n\n    const renderItem = ({ item }) => {\n        return <Product \n                styles={styles.text}\n                data={item} \n                onClick={()=>navigation.navigate(\"Detail\",item)}>\n                    {item.name}\n                </Product>\n    };\n\n    let stopFetchMore = true;\n\n    const handleOnEndReached = async () => {\n        setLoadingMore(true);\n        if (!stopFetchMore && !products.last) {\n            const res = await getProducts(products.numberOfElements+2)\n            .then(({data}) => {\n                setProducts(data)\n                if (data.last) return setLoadingMore(false);\n                setProducts({...products, ...data})\n                stopFetchMore = true;\n            })\n        }\n        setLoadingMore(false);\n    }\n\n    return (\n        <View style={styles.container}> \n            <View style={styles.header}>\n                <Image\n                source={require('../../assets/banner.png')}\n                style={styles.image}\n                />    \n                <View style={styles.textContainer}>\n                    <Text style={styles.text}>LOJA</Text>\n                    <Text style={styles.text}>•</Text>\n                    <Text style={styles.text}>BELLAFACE</Text>\n                    <TouchableOpacity style={{position: \"absolute\", right:0, alignSelf: 'center'}}>\n                        <Ionicons \n                            name=\"filter\" \n                            size={24} \n                            color=\"black\" \n                        />\n                    </TouchableOpacity>\n                </View>\n            </View>\n\n            <View style={styles.line}/>\n\n            <View style={styles.flatList}>\n                <Text style={styles.text}>LANÇAMENTOS</Text>\n                <FlatList\n                    onScroll={()=>\n                        stopFetchMore = false\n                    }\n                    data={products.content}\n                    renderItem={renderItem}\n                    horizontal={true}\n                    keyExtractor={item => item.id}\n                    onEndReached={handleOnEndReached}\n                    onEndReachedThreshold={0.5}\n                    ListFooterComponent={() => loadingMore && <ListFooterComponent/>}\n                />\n            </View>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container:{\n        flex:1,\n        width:\"100%\",\n        backgroundColor:\"#fff\"\n    },\n    header:{\n        marginBottom: 8\n    },\n    image:{\n        width:\"100%\",\n        height:200\n    },\n    textContainer:{\n        flexDirection: \"row\",\n        marginVertical: \"5%\",\n        marginHorizontal: \"5%\"\n    },\n    text:{\n        fontFamily: \"Anton_400Regular\",\n        fontSize:26,\n        marginHorizontal: \"1%\"\n    },\n    flatList:{\n        flex: 1\n    }\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}