{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Ionicons, AntDesign } from '@expo/vector-icons';\nimport Product from \"../../component/Product\";\nimport { getProducts } from \"../../services/Products\";\nimport { useNavigation } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Home(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loadingMore = _useState4[0],\n      setLoadingMore = _useState4[1];\n\n  useEffect(function _callee() {\n    var res;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(getProducts(4).then(function (data) {\n              setProducts(data.data.content);\n              console.log(data.data.content);\n            }));\n\n          case 2:\n            res = _context.sent;\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n\n  var _ListFooterComponent = function ListFooterComponent() {\n    _jsx(AntDesign, {\n      size: 24\n    });\n  };\n\n  var renderItem = function renderItem(_ref2) {\n    var item = _ref2.item;\n    return _jsx(Product, {\n      styles: styles.text,\n      data: item,\n      children: item.name\n    });\n  };\n\n  var stopFetchMore = false;\n\n  var handleOnEndReached = function _callee2() {\n    var res;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log(stopFetchMore);\n            setLoadingMore(true);\n\n            if (stopFetchMore) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(getProducts(res.numberOfElements + 3).then(function (data) {\n              return setProducts(data.content);\n            }));\n\n          case 5:\n            res = _context2.sent;\n\n            if (!res.last) {\n              _context2.next = 8;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", setLoadingMore(false));\n\n          case 8:\n            setProducts([].concat(_toConsumableArray(products), _toConsumableArray(res.content)));\n            stopFetchMore = true;\n\n          case 10:\n            setLoadingMore(false);\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.header,\n      children: [_jsx(Image, {\n        source: require(\"../../assets/banner.png\"),\n        style: styles.image\n      }), _jsxs(View, {\n        style: styles.textContainer,\n        children: [_jsx(Text, {\n          style: styles.text,\n          children: \"LOJA\"\n        }), _jsx(Text, {\n          style: styles.text,\n          children: \"\\u2022\"\n        }), _jsx(Text, {\n          style: styles.text,\n          children: \"BELLAFACE\"\n        }), _jsx(TouchableOpacity, {\n          style: {\n            position: \"absolute\",\n            right: 0,\n            alignSelf: 'center'\n          },\n          children: _jsx(Ionicons, {\n            name: \"filter\",\n            size: 24,\n            color: \"black\"\n          })\n        })]\n      })]\n    }), _jsx(View, {\n      style: styles.line\n    }), _jsxs(View, {\n      children: [_jsx(Text, {\n        style: styles.text,\n        children: \"LAN\\xC7AMENTOS\"\n      }), _jsx(FlatList, {\n        data: products,\n        renderItem: renderItem,\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        },\n        horizontal: false,\n        onEndReached: handleOnEndReached,\n        onEndReachedThreshold: 0.5,\n        onScrollBeginDrag: function onScrollBeginDrag() {\n          stopFetchMore = false;\n        },\n        ListFooterComponent: function ListFooterComponent() {\n          return loadingMore && _jsx(_ListFooterComponent, {});\n        }\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: \"100%\",\n    backgroundColor: \"#fff\"\n  },\n  header: {\n    marginBottom: 8\n  },\n  image: {\n    width: \"100%\"\n  },\n  textContainer: {\n    flexDirection: \"row\",\n    marginVertical: \"5%\",\n    marginHorizontal: \"5%\"\n  },\n  text: {\n    fontFamily: \"Anton_400Regular\",\n    fontSize: 26,\n    marginHorizontal: \"1%\"\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","Ionicons","AntDesign","Product","getProducts","useNavigation","Home","navigation","products","setProducts","loadingMore","setLoadingMore","then","data","content","console","log","res","ListFooterComponent","renderItem","item","styles","text","name","stopFetchMore","handleOnEndReached","numberOfElements","last","container","header","require","image","textContainer","position","right","alignSelf","line","id","StyleSheet","create","flex","width","backgroundColor","marginBottom","flexDirection","marginVertical","marginHorizontal","fontFamily","fontSize"],"sources":["/home/bruno/dev/simple-projects/frontend/src/pages/Home/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Text, View, StyleSheet, ScrollView, Image, TouchableOpacity, FlatList } from \"react-native\";\nimport { Ionicons, AntDesign } from '@expo/vector-icons'; \nimport Product from '../../component/Product';\nimport {getProducts} from '../../services/Products'\nimport { useNavigation } from '@react-navigation/native';\n\nexport default function Home({navigation}) {\n\n    const [products, setProducts] = useState({});\n    const [loadingMore, setLoadingMore] = useState(false);\n\n    useEffect(async ()=>{\n        const res = await getProducts(4).then((data) => {\n            setProducts(data.data.content)\n            console.log(data.data.content)\n        })\n    },[])\n\n    const ListFooterComponent = () => {\n        <AntDesign size={24} />\n    }\n\n    const renderItem = ({ item }) => {\n        return <Product styles={styles.text} data={item} >{item.name}</Product>\n    };\n\n    let stopFetchMore = false;\n\n    const handleOnEndReached = async () => {\n        console.log(stopFetchMore)\n        setLoadingMore(true);\n        if (!stopFetchMore) {\n            const res = await getProducts(res.numberOfElements+3).then((data) => setProducts(data.content))\n            if (res.last) return setLoadingMore(false);\n            setProducts([...products, ...res.content])\n            stopFetchMore = true;\n        }\n        setLoadingMore(false);\n    }\n\n    return (\n        <View style={styles.container}> \n            <View style={styles.header}>\n                <Image\n                source={require('../../assets/banner.png')}\n                style={styles.image}\n                />    \n                <View style={styles.textContainer}>\n                    <Text style={styles.text}>LOJA</Text>\n                    <Text style={styles.text}>•</Text>\n                    <Text style={styles.text}>BELLAFACE</Text>\n                    <TouchableOpacity style={{position: \"absolute\", right:0, alignSelf: 'center'}}>\n                        <Ionicons \n                            name=\"filter\" \n                            size={24} \n                            color=\"black\" \n                        />\n                    </TouchableOpacity>\n                </View>\n            </View>\n\n            <View style={styles.line}/>\n\n            <View>\n                <Text style={styles.text}>LANÇAMENTOS</Text>\n                <FlatList \n                    data={products}\n                    renderItem={renderItem}\n                    keyExtractor={item => item.id}\n                    horizontal={false}\n                    onEndReached={handleOnEndReached}\n                    onEndReachedThreshold={0.5}\n                    onScrollBeginDrag={()=>{\n                        stopFetchMore = false;\n                    }}\n                    ListFooterComponent={() => loadingMore && <ListFooterComponent/>}\n                />\n            </View>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container:{\n        flex:1,\n        width:\"100%\",\n        backgroundColor:\"#fff\"\n    },\n    header:{\n        marginBottom: 8\n    },\n    image:{\n        width:\"100%\"\n    },\n    textContainer:{\n        flexDirection: \"row\",\n        marginVertical: \"5%\",\n        marginHorizontal: \"5%\"\n    },\n    text:{\n        fontFamily: \"Anton_400Regular\",\n        fontSize:26,\n        marginHorizontal: \"1%\"\n    }\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}