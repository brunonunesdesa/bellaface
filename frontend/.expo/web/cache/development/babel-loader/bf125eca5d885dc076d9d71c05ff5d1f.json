{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport 'react-native-gesture-handler';\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport React, { useEffect, useState } from 'react';\nimport AppLoading from 'expo-app-loading';\nimport { useFonts, Anton_400Regular } from '@expo-google-fonts/anton';\nimport Routes from \"./src/router\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport api from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useFonts = useFonts({\n    Anton_400Regular: Anton_400Regular\n  }),\n      _useFonts2 = _slicedToArray(_useFonts, 1),\n      fontsLoaded = _useFonts2[0];\n\n  var _useState = useState({\n    access_token: \"\",\n    expires_in: 0,\n    scope: \"\",\n    token_type: \"bearer\",\n    userFirstName: \"\",\n    userId: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var getUser = function _callee() {\n    var jsonValue;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@user'));\n\n          case 3:\n            jsonValue = _context.sent;\n            return _context.abrupt(\"return\", jsonValue != null ? JSON.parse(jsonValue) : null);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var saveUser = function _callee2(user) {\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            setUser(user);\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('@user', JSON.stringify(user)));\n\n          case 4:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  useEffect(function () {\n    return verifyUser();\n  }, []);\n\n  var verifyUser = function verifyUser() {\n    try {\n      getUser().then(function (userData) {\n        if (userData) {\n          api.request({\n            method: 'POST',\n            url: \"http://localhost:8080/oauth/token\",\n            headers: {\n              'content-type': 'application/x-www-form-urlencoded'\n            },\n            params: {\n              grant_type: \"password\",\n              username: user.username || \"maria@gmail.com\",\n              password: user.password || \"123456\"\n            }\n          }).then(function (res) {\n            if (res.status >= 200 && res.status < 300) {\n              saveUser(res.data);\n              console.log(user);\n            } else {}\n          }).catch(function (err) {\n            console.log(err);\n          });\n        }\n      });\n    } catch (e) {}\n  };\n\n  if (!fontsLoaded) {\n    return _jsx(AppLoading, {});\n  }\n\n  return _jsxs(_Fragment, {\n    children: [_jsx(StatusBar, {\n      style: \"auto\",\n      backgroundColor: \"#000\",\n      translucent: true\n    }), _jsx(Routes, {})]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"names":["StatusBar","React","useEffect","useState","AppLoading","useFonts","Anton_400Regular","Routes","AsyncStorage","api","App","fontsLoaded","access_token","expires_in","scope","token_type","userFirstName","userId","user","setUser","getUser","getItem","jsonValue","JSON","parse","saveUser","setItem","stringify","verifyUser","then","userData","request","method","url","headers","params","grant_type","username","password","res","status","data","console","log","catch","err","e","styles","StyleSheet","create","container","flex","backgroundColor","alignItems","justifyContent"],"sources":["/home/bruno/dev/simple-projects/frontend/App.js"],"sourcesContent":["import 'react-native-gesture-handler';\nimport { StatusBar } from 'expo-status-bar';\nimport { StyleSheet } from 'react-native';\nimport React, { useEffect, useState } from 'react';\nimport AppLoading from 'expo-app-loading';\nimport {useFonts, Anton_400Regular} from '@expo-google-fonts/anton';\nimport Routes from './src/router';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport api from 'axios';\n\nexport default function App() {\n\n  let [fontsLoaded] = useFonts({\n    Anton_400Regular,\n  });\n\n  const [user, setUser] = useState({\n    access_token: \"\",\n    expires_in: 0,\n    scope: \"\",\n    token_type: \"bearer\",\n    userFirstName: \"\",\n    userId: null\n  });\n  \n  const getUser = async () => {\n    try {\n      const jsonValue = await AsyncStorage.getItem('@user')\n      return jsonValue != null ? JSON.parse(jsonValue) : null;\n    } catch(e) {\n    }\n  }\n\n  const saveUser = async (user) => {\n    try {\n      setUser(user);\n      return await AsyncStorage.setItem('@user', JSON.stringify(user));\n    } catch(e) {\n      // save error\n    }\n  }\n\n  useEffect(\n    ()=>verifyUser()\n  ,[])\n\n  const verifyUser = () => {\n    try{\n      getUser().then((userData) => {\n        if (userData) {\n          api.request({\n            method:'POST',\n            url: `http://localhost:8080/oauth/token`,\n            headers: { 'content-type': 'application/x-www-form-urlencoded' },\n            params: {\n              grant_type: \"password\",\n              username: user.username || \"maria@gmail.com\",\n              password: user.password || \"123456\",\n            }\n          }).then(res => {\n              if (res.status >= 200 && res.status < 300) {\n                  saveUser(res.data)\n                  console.log(user)\n              } else {\n                  \n              }\n          }).catch((err) => {\n            console.log(err);\n          })\n        }\n      })\n    } catch (e) {\n\n    }\n  }\n\n  \n\n  if(!fontsLoaded){ \n    return <AppLoading />\n  }\n\n  return (\n    <>\n      <StatusBar style=\"auto\" backgroundColor=\"#000\" translucent={true}/>\n      <Routes/>\n    </> \n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}